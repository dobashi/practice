class Direction{constructor(t,i){this.name=t,this.step=i,this.add=(t=>new Position(t.x+i.x,t.y+i.y))}}const Right=new Direction("Right",{x:1,y:0}),Up=new Direction("Ujp",{x:0,y:1}),Left=new Direction("Left",{x:-1,y:0}),Down=new Direction("Down",{x:0,y:-1});let directions=[Right,Up,Left,Down],nextDirection=t=>{console.log(t);let i=directions.findIndex(i=>i.name==t.name),e=i==directions.length-1?0:i+1;return directions[e]},__ground=[];const groundPut=t=>__ground.push(Object.assign({},t)),groundFind=t=>__ground.find(i=>i.equals(t)),groundNext=t=>{let i=t.position,e=t.direction,n=nextDirection(e),r=n.add(i);return groundFind(r)?{position:e.add(i),direction:e}:{position:r,direction:n}},calc=(t,i,e)=>{let n,r,o=e/2;return t>i?(n=t-o,r=i+o):t<i?(n=t+o,r=i-o):(n=t,r=i),{s:n,d:r}},drawLine=(t,i)=>{const e=convert(t),n=convert(i),r=calc(e.x,n.x,Area.width),o=calc(e.y,n.y,Area.height);$("canvas").drawLine({strokeStyle:"#333333",strokeWidth:2,rounded:!0,endArrow:!0,x1:r.s,y1:o.s,x2:r.d,y2:o.d})};class Position{constructor(t,i){this.x=t,this.y=i,this.equals=(t=>this.x==t.x&&this.y==t.y),this.toString=(()=>"("+this.x+","+this.y+")")}}let __primes=[2,3];const calcPrime=t=>{for(let i=__primes[__primes.length-1];i<t;i+=2)null==__primes.find(t=>i%t==0)&&__primes.push(i)},isPrime=t=>__primes.includes(t),offset={x:canvas.width/2,y:canvas.height/2},Area={width:50,height:30,interval:10},wi=Area.width+Area.interval,hi=Area.height+Area.interval,convert=t=>new Position(t.x*wi+offset.x,t.y*hi*-1+offset.y),box=(t,i)=>{$("canvas").drawRect({fillStyle:i,x:t.x,y:t.y,width:Area.width,height:Area.height})},drawPos=(t,i,e)=>{$("canvas").drawText({fillStyle:e,x:t.x,y:t.y,text:i})},startColor={fg:"#FFFFFF",bg:"#00CC33"},normalColor={fg:"#000000",bg:"#F0F0FF"},primeColor={fg:"#FFFFFF",bg:"#CC2010"},draw=(t,i)=>{const e=1==t?startColor:isPrime(t)?primeColor:normalColor;let n=convert(i.position);box(n,e.bg),drawPos(n,t,e.fg)};
